jQuery(document).ready(function($){"use strict";function t(t,s){this.val="",this.elem=s,this.listeners={valid:[],invalid:[]},this.attrs={required:"",maxlength:8,minlength:4,coupon:"ALPHA18",number:/^[a-zA-Z0-9”#$%&*+-.\/?@_]*$/,url:/^(https?|ftp)(:\/\/[-_.!~*¥'()a-zA-Z0-9;¥\/?:¥@&=+¥$,%#]+)$/,mail:/^[a-zA-Z0-9."!#$%&*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/},this.message={required:"Required",maxlength:this.attrs.maxlength+"Maximum 8 characters",minlength:this.attrs.minlength+"Minimum 4 characters",number:"Numbers only",coupon:"Invalid Coupon.",coupon1:"Invalid Coupon.",coupon2:"Invalid Coupon.",url:"Must be a properly formmated url",mail:"Must be a properly formmated email address"}}function s(t){this.initialize(t),this.handleEvents()}t.prototype.set=function(t){this.val=t,this.validate()},t.prototype.validate=function(){var t;this.errors=[];for(var s in this.attrs)if(t=this.attrs[s],this[s](t))return;this.trigger(this.errors.length?"invalid":"valid")},t.prototype.required=function(){var t="required";this.elem.hasClass("js-validate-"+t)&&""===this.val&&this.errors.push(t)},t.prototype.coupon=function(t){var s="coupon";""!==this.val&&this.elem.hasClass("js-validate-"+s)&&(this.val.match(t)||this.errors.push(s))},t.prototype.maxlength=function(t){var s="maxlength";""!==this.val&&this.elem.hasClass("js-validate-"+s)&&t<this.val.length&&this.errors.push(s)},t.prototype.minlength=function(t){var s="minlength";""!==this.val&&this.elem.hasClass("js-validate-"+s)&&t>=this.val.length&&this.errors.push(s)},t.prototype.number=function(t){var s="number";""!==this.val&&this.elem.hasClass("js-validate-"+s)&&(this.val.match(t)||this.errors.push(s))},t.prototype.url=function(t){var s="url";""!==this.val&&this.elem.hasClass("js-validate-url")&&(this.val.match(t)||this.errors.push(s))},t.prototype.mail=function(t){var s="mail";""!==this.val&&this.elem.hasClass("js-validate-mail")&&(this.val.match(t)||this.errors.push(s))},t.prototype.on=function(t,s){this.listeners[t].push(s)},t.prototype.trigger=function(t){$.each(this.listeners[t],function(){this()})},s.prototype.initialize=function(s){this.$el=$(s),this.$list=this.$el.next(),this.$submit=$(".js-submit"),this.$form=$(".js-form");var i=this.$el.data();this.$el.hasClass("required")&&(i.required=""),this.model=new t(i,this.$el)},s.prototype.handleEvents=function(){var t=this;this.$el.on("keyup",function(s){t.onKeyup(s),console.log(t)}),this.$submit.on("click",function(){t.onClick()}),this.model.on("valid",function(){t.onValid()}),this.model.on("invalid",function(){t.onInvalid()})},s.prototype.onKeyup=function(t){var s=$(t.currentTarget);this.model.set(s.val())},s.prototype.onClick=function(){var t=this.$el;t.hasClass("js-validate-required")&&this.model.set(t.val())},s.prototype.onValid=function(){var t=this.$form;this.$el.removeClass("error"),this.$list.find(".errText").remove(),$(".payment-process").removeClass("disabled"),this.$submit.click(function(){t.submit()})},s.prototype.onInvalid=function(){var t=this;t.message=this.model.message,this.$el.addClass("error"),this.$list.find(".errText").remove(),$.each(this.model.errors,function(s,i){var e=t.message[i];t.$list.append('<p class="errText">'+e+"</p>")}),$(".payment-process").addClass("disabled")},$(".js-validate").each(function(){new s(this)})});