var currentNode=new Array,nodeOffset="",jci_element=null;jQuery(document).ready(function(e){var t,i={};e("#jc-importer_parser_settings-import_base").on("change",function(){e.fn.nodeSelect(null)}),e.fn.nodeSelect=function(n){i={action:"jc_import_file",id:ajax_object.id,base:e("#jc-importer_parser_settings-import_base").val()},void 0!==n&&(i.base=n),i.base&&(t=i.base.split("/"),nodeOffset=t[t.length-1]),e("<b>–</b>").prependTo("#treeView li:has(li)").click(function(){"–"==e(this).text()?e(this).text("+").parent("li").find(" > ul").children().hide():e(this).text("–").parent("li").find(" > ul").children().show()});var r="";e(".xml-draggable").click(function(){r=e(this).data("xpath"),jci_element.val("{"+r+"}"),jci_element.trigger("change"),tb_remove()})}}),jQuery(function(e){e("#jc-importer_parser_settings-import_base").click(function(){e(this);var t={action:"jc_base_node",id:ajax_object.id};e.post(ajax_object.ajax_url,t,function(t){e("#xml_preview_box").html(t)})})}),jQuery(document).ready(function(e){e(document).on("click",".xml-import .jci-import-edit",function(t){var i=e(this).closest(".jci-node-group"),n=e("#jc-importer_parser_settings-import_base").val();e(this).parent().hasClass("jci-group")&&(n+=i.find(".jc-importer_general-group input").val()),jci_element=e(this).parent().find("input");tb_show("Node Select",ajax_object.node_ajax_url+"&type=xml&current="+jci_element.val()+"&base="+n);t.preventDefault()}),e(document).on("click",".base-node-select",function(t){if(e(this).hasClass("base")){jci_element=e(this).parent().find("input");tb_show("Node Select",ajax_object.base_node_ajax_url+"&current="+jci_element.val())}else{var i=e("#jc-importer_parser_settings-import_base").val();jci_element=e(this).parent().find("input");tb_show("Node Select",ajax_object.base_node_ajax_url+"&current="+jci_element.val()+"&base="+i)}t.preventDefault()})}),jQuery(function(e){e(document).on("click",".csv-import .jci-import-edit",function(t){jci_element=e(this).parent().find("input");tb_show("Node Select",ajax_object.node_ajax_url+"&type=csv&width=800");t.preventDefault()})}),function(e){e.fn.jci_enableField=function(t,i){var n=e('input[name="jc-importer_template_settings['+t+']"]'),r=e("#jc-importer_field-"+i);r.length||(r=e(i)),n.on("change",function(){var t=r.parent();e(this).is(":checked")?t.show():t.hide()}),n.trigger("change")},e.fn.jci_enableSelectField=function(t,i){var n=e('input[name="jc-importer_template_settings['+t+']"]'),r=e("input#jc-importer_field-"+i),c=e("select#jc-importer_field-"+i)[0].outerHTML,a=r[0].outerHTML,o=r.val(),l=0;n.on("change",function(){e(this).is(":checked")?(1==l&&(o=e("select#jc-importer_field-"+i).val()),e("select#jc-importer_field-"+i).replaceWith(a),o.length>0&&e("input#jc-importer_field-"+i).val(o),e("input#jc-importer_field-"+i).parent().removeClass("select")):(1==l&&(o=e("input#jc-importer_field-"+i).val()),e("input#jc-importer_field-"+i).replaceWith(c),o.length>0&&e("select#jc-importer_field-"+i).val(o),e("select#jc-importer_field-"+i).parent().addClass("select"))}),n.trigger("change"),l=1}}(jQuery),function(e){var t=function(){e(".iwp-field__tooltip:not(.iwp-field__tooltip--initialized)").each(function(){e(this).attr("title")?(e(this).addClass("iwp-field__tooltip--initialized"),e(this).tipTip({defaultPosition:"right"})):e(this).hide()})};e(document).ready(function(){t()}),e(document).on("iwp_importer_updated",function(){t()})}(jQuery);